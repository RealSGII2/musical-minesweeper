(this["webpackJsonpmusical-minesweeper"]=this["webpackJsonpmusical-minesweeper"]||[]).push([[0],{23:function(e,t,n){},39:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),l=n(12),o=n.n(l),s=(n(39),n(5)),a=n(16),r=n(21),d=(n(23),n(8)),u=(n(14),n(2));var j=function(e){var t=e.children,n=e.disabled,i=Object(r.a)(e,["children","disabled"]);return Object(u.jsx)(d.a,{disabled:n,children:Object(u.jsx)("button",Object(a.a)(Object(a.a)({className:"customButton",disabled:n},i),{},{children:t}))})},b=n(9),h=n(68),v=n(20),O=n(69),m=n(66),f=n(30),g=n(7),x=n(67),p=(n(26),n(42),n(44),n(46),n(49),n(53),n(55),Object(x.b)()),w=n(11);function C(e){var t=e.children,n=e.pressed,i=e.id,c=Object(r.a)(e,["children","pressed","id"]);return Object(u.jsx)("td",{children:Object(u.jsx)("button",Object(a.a)(Object(a.a)({className:"gridButton ".concat(n?"pressed":""),id:i},c),{},{children:t}))})}var y={x:null,0:"lightgrey",1:"blue",2:"green",3:"red",4:"purple",5:"maroon",6:"turquoise",7:"black",8:"grey"},S={x:null,0:"",1:"\ud834\udd5d",2:"\ud834\udd5e",3:"\u2669",4:"\u266a",5:"\ud834\udd61",6:"\ud834\udd62",7:"\ud834\udd63",8:"\ud834\udd64"},k=function(e,t,n){for(var i=[],c=0;c<t;c++){i[c]=[];for(var l=0;l<e;l++)i[c][l]=n}return[].concat(i)},N=function(e,t,n){for(var i=k(e,t,0);n>0;){var c=Math.floor(Math.random()*e),l=Math.floor(Math.random()*t);"x"!==i[l][c]&&(i[l][c]="x",n-=1)}for(var o=0;o<t;o++)for(var s=0;s<e;s++){var a,r,d,u,j,b,h,v;if("x"===i[o][s])"number"===typeof(null===(a=i[o-1])||void 0===a?void 0:a[s-1])&&i[o-1][s-1]++,"number"===typeof(null===(r=i[o-1])||void 0===r?void 0:r[s])&&i[o-1][s]++,"number"===typeof(null===(d=i[o-1])||void 0===d?void 0:d[s+1])&&i[o-1][s+1]++,"number"===typeof(null===(u=i[o])||void 0===u?void 0:u[s+1])&&i[o][s+1]++,"number"===typeof(null===(j=i[o+1])||void 0===j?void 0:j[s+1])&&i[o+1][s+1]++,"number"===typeof(null===(b=i[o+1])||void 0===b?void 0:b[s])&&i[o+1][s]++,"number"===typeof(null===(h=i[o+1])||void 0===h?void 0:h[s-1])&&i[o+1][s-1]++,"number"===typeof(null===(v=i[o])||void 0===v?void 0:v[s-1])&&i[o][s-1]++}return Object(w.a)(i)},R=c.a.forwardRef((function(e,t){var n=Object(i.useState)(N(e.width,e.height,e.numMines)),l=Object(s.a)(n,2),o=l[0],a=l[1],r=Object(i.useState)(k(e.width,e.height,0)),d=Object(s.a)(r,2),j=d[0],b=d[1],h=Object(i.useState)(0),v=Object(s.a)(h,2),O=v[0],m=v[1],f=Object(i.useState)(0),g=Object(s.a)(f,2),x=g[0],p=g[1],R=Object(i.useState)(!1),F=Object(s.a)(R,2),G=F[0],M=F[1],D=c.a.useState(!1),I=Object(s.a)(D,2),T=I[0],B=I[1],H=c.a.useState(!1),A=Object(s.a)(H,2),E=A[0],L=A[1],P=e.Congrats,J=e.GameOver,W=e.onStart,Y=e.onEnd,_=e.onReset;console.log("H: ".concat(e.height)),console.log("G: ".concat(o.length)),console.log("R: ".concat(j.length)),o.length!==e.height&&a(N(e.width,e.height,e.numMines)),j.length!==e.height&&b(k(e.width,e.height,0)),c.a.useImperativeHandle(t,(function(){return{newGame:function(){p(0),e.setFlagsCount(0),m(0),a(Object(w.a)(N(e.width,e.height,e.numMines))),b(Object(w.a)(k(e.width,e.height,0))),B(!1),L(!1),_(0,!1),M(!1)},restartGame:function(){p(0),e.setFlagsCount(0),m(0),b(Object(w.a)(k(e.width,e.height,0))),M(!1)},solveGame:function(){p(0),e.setFlagsCount(0),m(0),b(Object(w.a)(k(e.width,e.height,1))),M(!1)}}}));for(var q=function(t,n){if(1!==j[t][n]){if(0===o[t][n]&&z(t,n),"x"===o[t][n])return L(!0),b(Object(w.a)(k(e.width,e.height,1))),void Y();j[t][n]=1;for(var i=0,c=0;c<j.length;c++)for(var l=0;l<j[c].length;l++)1===j[c][l]&&(i+=1);m(i),b(Object(w.a)(j)),i===e.width*e.height-e.numMines&&(B(!0),b(Object(w.a)(k(e.width,e.height,1))),Y())}},z=function(e,t){var n=[[e,t]];for(j[e][t]=1;n.length>0;){var i,c,l,a,r,d,u,b,h,v,O,m,f,g,x,p,w,C,y,S,k,N,R,F,G=Object(s.a)(n[0],2),M=G[0],D=G[1];if((null===(i=o[M-1])||void 0===i?void 0:i[D-1])>=0&&0===(null===(c=j[M-1])||void 0===c?void 0:c[D-1]))j[M-1][D-1]=1,0===(null===(w=o[M-1])||void 0===w?void 0:w[D-1])&&n.push([M-1,D-1]);if((null===(l=o[M-1])||void 0===l?void 0:l[D])>=0&&0===(null===(a=j[M-1])||void 0===a?void 0:a[D]))j[M-1][D]=1,0===(null===(C=o[M-1])||void 0===C?void 0:C[D])&&n.push([M-1,D]);if((null===(r=o[M-1])||void 0===r?void 0:r[D+1])>=0&&0===(null===(d=j[M-1])||void 0===d?void 0:d[D+1]))j[M-1][D+1]=1,0===(null===(y=o[M-1])||void 0===y?void 0:y[D+1])&&n.push([M-1,D+1]);if((null===(u=o[M])||void 0===u?void 0:u[D+1])>=0&&0===(null===(b=j[M])||void 0===b?void 0:b[D+1]))j[M][D+1]=1,0===(null===(S=o[M])||void 0===S?void 0:S[D+1])&&n.push([M,D+1]);if((null===(h=o[M+1])||void 0===h?void 0:h[D+1])>=0&&0===(null===(v=j[M+1])||void 0===v?void 0:v[D+1]))j[M+1][D+1]=1,0===(null===(k=o[M+1])||void 0===k?void 0:k[D+1])&&n.push([M+1,D+1]);if((null===(O=o[M+1])||void 0===O?void 0:O[D])>=0&&0===(null===(m=j[M+1])||void 0===m?void 0:m[D]))j[M+1][D]=1,0===(null===(N=o[M+1])||void 0===N?void 0:N[D])&&n.push([M+1,D]);if((null===(f=o[M+1])||void 0===f?void 0:f[D-1])>=0&&0===(null===(g=j[M+1])||void 0===g?void 0:g[D-1]))j[M+1][D-1]=1,0===(null===(R=o[M+1])||void 0===R?void 0:R[D-1])&&n.push([M+1,D-1]);if((null===(x=o[M])||void 0===x?void 0:x[D-1])>=0&&0===(null===(p=j[M])||void 0===p?void 0:p[D-1]))j[M][D-1]=1,0===(null===(F=o[M])||void 0===F?void 0:F[D-1])&&n.push([M,D-1]);n.shift()}},K=function(e,t){return 0===j[e][t]?"":1===j[e][t]?"number"===typeof o[e][t]?S[o[e][t]]:Object(u.jsx)("img",{src:"https://twemoji.maxcdn.com/v/latest/svg/1f4a3.svg",alt:"mine",width:20,height:20}):2===j[e][t]?Object(u.jsx)("img",{src:"https://twemoji.maxcdn.com/v/latest/svg/1f6a9.svg",alt:"flag",width:20,height:20}):void 0},Q=[],U=function(t){Q[t]=new Array,console.log(t);for(var n=function(n){Q[t].push(Object(u.jsx)(C,{id:t+":"+n,pressed:1===j[t][n],style:{color:0===j[t][n]?"lightgrey":y[o[t][n]]},onClick:function(){G||(M(!0),W()),q(t,n)},onContextMenu:function(i){!function(t,n){0===j[t][n]?(j[t][n]=2,p(++x)):2===j[t][n]&&(j[t][n]=0,p(--x)),e.setFlagsCount(x),b(Object(w.a)(j))}(t,n),i.preventDefault()},children:K(t,n)}))},i=0;i<o[t].length;i++)n(i)},V=0;V<o.length;V++)U(V);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"map ".concat(e.width<16?"small":""),children:[T&&P({revealed:O,close:function(){return B(!1)}}),E&&J({revealed:O,close:function(){return L(!1)}}),Object(u.jsx)("table",{children:Q.map((function(e){return Object(u.jsx)("tr",{children:e})}))})]})})})),F=n(28),G=[{name:"Beginner",rowCount:9,colCount:9,mineCount:10},{name:"Intermediate",rowCount:16,colCount:16,mineCount:40},{name:"Expert",rowCount:16,colCount:30,mineCount:99}],M=Object(i.forwardRef)((function(e,t){var n,l=e.rowCount,o=e.colCount,a=e.mineCount,r=e.openDifficultyDialog,d=e.openHelpDialog,h=Object(i.useState)(0),O=Object(s.a)(h,2),m=O[0],f=O[1],w=Object(i.useRef)(),C=Object(i.useState)(0),y=Object(s.a)(C,2),S=y[0],k=y[1],N=Object(F.useStopwatch)({}),G=N.seconds,M=N.minutes,D=N.hours,I=N.start,T=N.pause,B=N.reset,H=1==G.toString().length?"0".concat(G):G,A=1==M.toString().length?"0".concat(M):M,E=1==D.toString().length?"0".concat(D):D,L="".concat(E,":").concat(A,":").concat(H);c.a.useImperativeHandle(t,(function(){return{newGame:function(){w.current.newGame()},rerender:function(){k(S+1)}}}));var P=function(e){var t=e.revealed;return Object(u.jsxs)("div",{className:"flexRow",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)(g.a,{use:"headline5",children:m}),Object(u.jsx)(g.a,{use:"subtitle2",children:"Flags Placed"})]}),Object(u.jsx)("div",{className:"divider"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(g.a,{use:"headline5",children:L}),Object(u.jsx)(g.a,{use:"subtitle2",children:"Time"})]}),Object(u.jsx)("div",{className:"divider"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(g.a,{use:"headline5",children:t}),Object(u.jsx)(g.a,{use:"subtitle2",children:"Blocks revealed"})]})]})},J={body:"Click 'Start a new match' to make a new game",dismissesOnAction:!0,actions:[{title:"Dismiss"}],leading:!0};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(x.a,{messages:p.messages}),Object(u.jsxs)("div",{className:"gameWrapper",children:[Object(u.jsxs)("div",{className:"header",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{src:"https://twemoji.maxcdn.com/v/latest/svg/1f6a9.svg",className:"icon"}),Object(u.jsx)("div",{children:a-m})]}),Object(u.jsx)("div",{className:"divider"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{src:"https://twemoji.maxcdn.com/v/latest/svg/1f550.svg",className:"icon"}),Object(u.jsx)("div",{children:L})]}),Object(u.jsx)("div",{className:"spacer"}),Object(u.jsx)(v.a,{icon:"help_outline",label:"Help & controls",onClick:d})]}),Object(u.jsx)(R,{ref:w,height:l||16,width:o||30,numMines:a||99,setFlagsCount:f,onStart:I,onEnd:T,onReset:B,GameOver:function(e){var t,n=e.revealed,i=e.close;return Object(u.jsxs)("div",{className:"banner error",children:[Object(u.jsx)(g.a,{use:"headline4",children:"Game Over"}),Object(u.jsx)(g.a,{use:"subtitle1",children:"You triggered a mine."}),Object(u.jsx)(P,{revealed:n}),Object(u.jsxs)("div",{className:"buttonRow",children:[Object(u.jsx)(b.a,{label:"Review last game",outlined:!0,onClick:function(){p.notify(J),i()}}),Object(u.jsx)(b.a,{label:"Change difficulty",outlined:!0,onClick:r}),Object(u.jsx)(b.a,{label:"New game",unelevated:!0,onClick:null===w||void 0===w||null===(t=w.current)||void 0===t?void 0:t.newGame})]})]})},Congrats:function(e){var t,n=e.revealed,i=e.close;return Object(u.jsxs)("div",{className:"banner error",children:[Object(u.jsx)(g.a,{use:"headline4",children:"Game Completed!"}),Object(u.jsx)(g.a,{use:"subtitle1",children:"You got through the entire map without triggering a mine."}),Object(u.jsx)(P,{revealed:n}),Object(u.jsxs)("div",{className:"buttonRow",children:[Object(u.jsx)(b.a,{label:"Review last game",outlined:!0,onClick:function(){p.notify(J),i()}}),Object(u.jsx)(b.a,{label:"Change difficulty",outlined:!0,onClick:r}),Object(u.jsx)(b.a,{label:"New game",unelevated:!0,onClick:null===w||void 0===w||null===(t=w.current)||void 0===t?void 0:t.newGame})]})]})}}),Object(u.jsxs)("div",{className:"actionRow buttonRow",children:[Object(u.jsxs)(j,{onClick:null===w||void 0===w||null===(n=w.current)||void 0===n?void 0:n.newGame,children:[Object(u.jsx)("span",{className:"material-icons",children:"refresh"}),Object(u.jsx)("span",{children:"Start a new match"})]}),Object(u.jsxs)(j,{onClick:r,children:[Object(u.jsx)("span",{className:"material-icons",children:"tune"}),Object(u.jsx)("span",{children:"Change difficulty"})]})]})]})]})}));var D=function(){var e=Object(i.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(i.useState)(2),o=Object(s.a)(l,2),a=o[0],r=o[1],d=Object(i.useState)(!1),j=Object(s.a)(d,2),b=j[0],v=j[1],x=Object(i.useState)(16),p=Object(s.a)(x,2),w=p[0],C=p[1],y=Object(i.useState)(30),S=Object(s.a)(y,2),k=S[0],N=S[1],R=Object(i.useState)(99),F=Object(s.a)(R,2),D=F[0],I=F[1],T=Object(i.useRef)();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(h.a,{open:n,onClose:function(e){if(console.log(e.detail.action),"change"==e.detail.action){var t,n=G[a];console.log(),C(n.rowCount),N(n.colCount),I(n.mineCount),null===(t=T.current)||void 0===t||t.rerender(),setTimeout((function(){var e;null===(e=T.current)||void 0===e||e.newGame()}),50)}c(!1)},onClosed:function(e){return console.log(e.detail.action)},children:[Object(u.jsx)(h.e,{children:"Change Difficulty"}),Object(u.jsxs)(h.d,{children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Warning:"})," This will create a new game."]}),Object(u.jsx)(O.a,{twoLine:!0,style:{width:480},children:G.map((function(e,t){return Object(u.jsxs)(m.a,{onClick:function(){return r(t)},children:[Object(u.jsxs)(m.e,{children:[Object(u.jsx)(m.c,{children:e.name}),Object(u.jsxs)(m.d,{children:["Rows: ",e.rowCount," - Columns:"," ",e.colCount," - Mines:"," ",e.mineCount]})]}),Object(u.jsx)(m.b,{children:Object(u.jsx)(f.a,{checked:a===t,readOnly:!0})})]},t)}))})]}),Object(u.jsxs)(h.b,{children:[Object(u.jsx)(h.c,{action:"close",children:"Cancel"}),Object(u.jsx)(h.c,{action:"change",unelevated:!0,children:"Change difficulty"})]})]}),Object(u.jsxs)(h.a,{open:b,onClose:function(e){v(!1)},children:[Object(u.jsx)(h.e,{children:"Info"}),Object(u.jsxs)(h.d,{children:[Object(u.jsx)("p",{children:"Musical Minesweeper, v1.0.0 by RealSGII2."}),Object(u.jsx)("p",{children:"A skin of Minesweeper using musical notes."}),Object(u.jsx)(g.a,{use:"headline5",children:"Main Goal"}),Object(u.jsx)("p",{children:"Clear the entire map except for blocks containing mines underneath them. Flagging is optional, but may be useful."}),Object(u.jsx)(g.a,{use:"headline5",children:"Controls"}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Left mouse button"}),": Reveal a block ",Object(u.jsx)("br",{}),Object(u.jsx)("b",{children:"Right mouse button"}),": Flag a block, again to unflag"]}),Object(u.jsx)(g.a,{use:"headline5",children:"Credits"}),Object(u.jsxs)("p",{children:["Flag, clock, and bomb emoji made by Twitter in the Twemoji project. This website uses ",Object(u.jsx)("a",{href:"https://material.io/",target:"_blank",children:"https://material.io/"})," standards."]})]}),Object(u.jsx)(h.b,{children:Object(u.jsx)(h.c,{action:"close",isDefaultAction:!0,children:"Dismiss"})})]}),Object(u.jsx)(M,{rowCount:w,colCount:k,mineCount:D,openDifficultyDialog:function(){return c(!0)},openHelpDialog:function(){return v(!0)},ref:T})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,l=t.getLCP,o=t.getTTFB;n(e),i(e),c(e),l(e),o(e)}))};o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(D,{})}),document.getElementById("root")),I()}},[[57,1,2]]]);
//# sourceMappingURL=main.d890f661.chunk.js.map