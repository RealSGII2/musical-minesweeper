(this["webpackJsonpmusical-minesweeper"]=this["webpackJsonpmusical-minesweeper"]||[]).push([[0],{23:function(e,t,n){},39:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),l=n(12),s=n.n(l),a=(n(39),n(5)),o=n(16),r=n(21),d=(n(23),n(8)),u=(n(14),n(2));var j=function(e){var t=e.children,n=e.disabled,i=Object(r.a)(e,["children","disabled"]);return Object(u.jsx)(d.a,{disabled:n,children:Object(u.jsx)("button",Object(o.a)(Object(o.a)({className:"customButton",disabled:n},i),{},{children:t}))})},b=n(9),h=n(68),v=n(20),O=n(69),m=n(66),g=n(30),f=n(6),x=n(67),p=(n(26),n(42),n(44),n(46),n(49),n(53),n(55),Object(x.b)()),w=n(10);function C(e){var t=e.children,n=e.pressed,i=e.flagged,c=e.id,l=Object(r.a)(e,["children","pressed","flagged","id"]);return Object(u.jsx)("td",{className:"".concat(i?"flagged":""),children:Object(u.jsx)("button",Object(o.a)(Object(o.a)({className:"gridButton ".concat(n?"pressed":""),id:c},l),{},{children:t}))})}var y={x:null,0:"",1:Object(u.jsx)("img",{alt:"1",src:"/icons/whole.png"}),2:Object(u.jsx)("img",{alt:"2",src:"/icons/half.png"}),3:Object(u.jsx)("img",{alt:"3",src:"/icons/quarter.png"}),4:Object(u.jsx)("img",{alt:"4",src:"/icons/eighth.png"}),5:Object(u.jsx)("img",{alt:"5",src:"/icons/sixteenth.png"}),6:Object(u.jsx)("img",{alt:"6",src:"/icons/thirty_second.png"}),7:Object(u.jsx)("img",{alt:"7",src:"/icons/sixty_fourth.png"}),8:Object(u.jsx)("img",{alt:"8",src:"/icons/one_twenty_eighth.png"})},S=function(e,t,n){for(var i=[],c=0;c<t;c++){i[c]=[];for(var l=0;l<e;l++)i[c][l]=n}return[].concat(i)},k=function(e,t){return S(e,t,-1)},N=function(e,t,n,i,c){for(var l=S(e,t,0);n>0;){var s=Math.floor(Math.random()*e),a=Math.floor(Math.random()*t);"x"===l[a][s]||i-1<=s&&s<=i+1&&c-1<=a&&a<=c+1||(l[a][s]="x",n-=1)}for(var o=0;o<t;o++)for(var r=0;r<e;r++){var d,u,j,b,h,v,O,m;if("x"===l[o][r])"number"===typeof(null===(d=l[o-1])||void 0===d?void 0:d[r-1])&&l[o-1][r-1]++,"number"===typeof(null===(u=l[o-1])||void 0===u?void 0:u[r])&&l[o-1][r]++,"number"===typeof(null===(j=l[o-1])||void 0===j?void 0:j[r+1])&&l[o-1][r+1]++,"number"===typeof(null===(b=l[o])||void 0===b?void 0:b[r+1])&&l[o][r+1]++,"number"===typeof(null===(h=l[o+1])||void 0===h?void 0:h[r+1])&&l[o+1][r+1]++,"number"===typeof(null===(v=l[o+1])||void 0===v?void 0:v[r])&&l[o+1][r]++,"number"===typeof(null===(O=l[o+1])||void 0===O?void 0:O[r-1])&&l[o+1][r-1]++,"number"===typeof(null===(m=l[o])||void 0===m?void 0:m[r-1])&&l[o][r-1]++}return Object(w.a)(l)},R=c.a.forwardRef((function(e,t){var n,l,s=Object(i.useState)(k(e.width,e.height)),o=Object(a.a)(s,2),r=o[0],d=o[1],j=Object(i.useState)(S(e.width,e.height,0)),b=Object(a.a)(j,2),h=b[0],v=b[1],O=Object(i.useState)(0),m=Object(a.a)(O,2),g=m[0],f=m[1],x=Object(i.useState)(0),p=Object(a.a)(x,2),R=p[0],F=p[1],M=Object(i.useState)(!1),G=Object(a.a)(M,2),D=G[0],T=G[1],I=Object(i.useState)([null,null]),B=Object(a.a)(I,2),_=B[0],E=B[1],H=c.a.useState(!1),L=Object(a.a)(H,2),A=L[0],P=L[1],J=c.a.useState(!1),W=Object(a.a)(J,2),Y=W[0],q=W[1],z=e.Congrats,K=e.GameOver,Q=e.onStart,U=e.onEnd,V=e.onReset;(Object(i.useEffect)((function(){null!=_[0]&&null!=_[1]&&X(_[1],_[0])}),[r]),r.length!==e.height)&&(null==_[0]&&null==_[1]?d(k(e.width,e.height)):d(N(e.width,e.height,e.numMines,null!==(n=_[0])&&void 0!==n?n:0,null!==(l=_[1])&&void 0!==l?l:0)));h.length!==e.height&&v(S(e.width,e.height,0)),c.a.useImperativeHandle(t,(function(){return{newGame:function(){E([null,null]),F(0),e.setFlagsCount(0),f(0),d(Object(w.a)(k(e.width,e.height))),v(Object(w.a)(S(e.width,e.height,0))),P(!1),q(!1),V(0,!1),T(!1)},restartGame:function(){E([null,null]),F(0),e.setFlagsCount(0),f(0),v(Object(w.a)(S(e.width,e.height,0))),T(!1)},solveGame:function(){F(0),e.setFlagsCount(0),f(0),v(Object(w.a)(S(e.width,e.height,1))),T(!1)}}}));for(var X=function(t,n){if(1!==h[t][n]){if(0===r[t][n]&&Z(t,n),"x"===r[t][n])return q(!0),v(Object(w.a)(S(e.width,e.height,1))),void U();h[t][n]=1;for(var i=0,c=0;c<h.length;c++)for(var l=0;l<h[c].length;l++)1===h[c][l]&&(i+=1);f(i),v(Object(w.a)(h)),i===e.width*e.height-e.numMines&&(P(!0),v(Object(w.a)(S(e.width,e.height,1))),U())}},Z=function(e,t){var n=[[e,t]];for(h[e][t]=1;n.length>0;){var i,c,l,s,o,d,u,j,b,v,O,m,g,f,x,p,w,C,y,S,k,N,R,F,M=Object(a.a)(n[0],2),G=M[0],D=M[1];if((null===(i=r[G-1])||void 0===i?void 0:i[D-1])>=0&&1!==(null===(c=h[G-1])||void 0===c?void 0:c[D-1]))h[G-1][D-1]=1,0===(null===(w=r[G-1])||void 0===w?void 0:w[D-1])&&n.push([G-1,D-1]);if((null===(l=r[G-1])||void 0===l?void 0:l[D])>=0&&1!==(null===(s=h[G-1])||void 0===s?void 0:s[D]))h[G-1][D]=1,0===(null===(C=r[G-1])||void 0===C?void 0:C[D])&&n.push([G-1,D]);if((null===(o=r[G-1])||void 0===o?void 0:o[D+1])>=0&&1!==(null===(d=h[G-1])||void 0===d?void 0:d[D+1]))h[G-1][D+1]=1,0===(null===(y=r[G-1])||void 0===y?void 0:y[D+1])&&n.push([G-1,D+1]);if((null===(u=r[G])||void 0===u?void 0:u[D+1])>=0&&1!==(null===(j=h[G])||void 0===j?void 0:j[D+1]))h[G][D+1]=1,0===(null===(S=r[G])||void 0===S?void 0:S[D+1])&&n.push([G,D+1]);if((null===(b=r[G+1])||void 0===b?void 0:b[D+1])>=0&&1!==(null===(v=h[G+1])||void 0===v?void 0:v[D+1]))h[G+1][D+1]=1,0===(null===(k=r[G+1])||void 0===k?void 0:k[D+1])&&n.push([G+1,D+1]);if((null===(O=r[G+1])||void 0===O?void 0:O[D])>=0&&1!==(null===(m=h[G+1])||void 0===m?void 0:m[D]))h[G+1][D]=1,0===(null===(N=r[G+1])||void 0===N?void 0:N[D])&&n.push([G+1,D]);if((null===(g=r[G+1])||void 0===g?void 0:g[D-1])>=0&&1!==(null===(f=h[G+1])||void 0===f?void 0:f[D-1]))h[G+1][D-1]=1,0===(null===(R=r[G+1])||void 0===R?void 0:R[D-1])&&n.push([G+1,D-1]);if((null===(x=r[G])||void 0===x?void 0:x[D-1])>=0&&1!==(null===(p=h[G])||void 0===p?void 0:p[D-1]))h[G][D-1]=1,0===(null===(F=r[G])||void 0===F?void 0:F[D-1])&&n.push([G,D-1]);n.shift()}},$=function(e,t){return 0===h[e][t]?"":1===h[e][t]?"number"===typeof r[e][t]?y[r[e][t]]:Object(u.jsx)("img",{src:"https://twemoji.maxcdn.com/v/latest/svg/1f4a3.svg",alt:"mine",width:20,height:20}):2===h[e][t]?Object(u.jsx)("img",{src:"https://twemoji.maxcdn.com/v/latest/svg/1f6a9.svg",alt:"flag",width:20,height:20}):void 0},ee=[],te=function(t){ee[t]=new Array;for(var n=function(n){ee[t].push(Object(u.jsx)(C,{id:t+":"+n,pressed:1===h[t][n],flagged:2===h[t][n],onClick:function(){2!==h[t][n]&&(D?X(t,n):(T(!0),E([null,null]),E([n,t]),d(Object(w.a)(N(e.width,e.height,e.numMines,n,t))),Q()))},onContextMenu:function(i){if(!D)return i.preventDefault();!function(t,n){0===h[t][n]?(h[t][n]=2,F(++R)):2===h[t][n]&&(h[t][n]=0,F(--R)),e.setFlagsCount(R),v(Object(w.a)(h))}(t,n),i.target.blur(),i.preventDefault()},children:$(t,n)}))},i=0;i<r[t].length;i++)n(i)},ne=0;ne<r.length;ne++)te(ne);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"map ".concat(e.width<16?"small":""),children:[A&&z({revealed:g,close:function(){return P(!1)}}),Y&&K({revealed:g,close:function(){return q(!1)}}),Object(u.jsx)("table",{children:ee.map((function(e){return Object(u.jsx)("tr",{children:e})}))})]})})})),F=n(28),M=[{name:"Beginner",rowCount:9,colCount:9,mineCount:10},{name:"Intermediate",rowCount:16,colCount:16,mineCount:40},{name:"Expert",rowCount:16,colCount:30,mineCount:99}],G=Object(i.forwardRef)((function(e,t){var n,l=e.rowCount,s=e.colCount,o=e.mineCount,r=e.openDifficultyDialog,d=e.openHelpDialog,h=Object(i.useState)(0),O=Object(a.a)(h,2),m=O[0],g=(O[1],Object(i.useRef)()),w=Object(i.useState)(0),C=Object(a.a)(w,2),y=C[0],S=C[1],k=Object(F.useStopwatch)({}),N=k.seconds,M=k.minutes,G=k.hours,D=k.start,T=k.pause,I=k.reset,B=1==N.toString().length?"0".concat(N):N,_=1==M.toString().length?"0".concat(M):M,E=1==G.toString().length?"0".concat(G):G,H="".concat(E,":").concat(_,":").concat(B);c.a.useImperativeHandle(t,(function(){return{newGame:function(){g.current.newGame()},rerender:function(){S(y+1)}}}));var L=function(e){var t=e.revealed;return Object(u.jsxs)("div",{className:"flexRow",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)(f.a,{use:"headline5",children:m}),Object(u.jsx)(f.a,{use:"subtitle2",children:"Flags Placed"})]}),Object(u.jsx)("div",{className:"divider"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(f.a,{use:"headline5",children:H}),Object(u.jsx)(f.a,{use:"subtitle2",children:"Time"})]}),Object(u.jsx)("div",{className:"divider"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(f.a,{use:"headline5",children:t}),Object(u.jsx)(f.a,{use:"subtitle2",children:"Blocks revealed"})]})]})},A={body:"Click 'Start a new match' to make a new game",dismissesOnAction:!0,actions:[{title:"Dismiss"}],leading:!0};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(x.a,{messages:p.messages}),Object(u.jsxs)("div",{className:"gameWrapper",children:[Object(u.jsxs)("div",{className:"header",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{src:"https://twemoji.maxcdn.com/v/latest/svg/1f6a9.svg",className:"icon"}),Object(u.jsx)("div",{children:o-m})]}),Object(u.jsx)("div",{className:"divider"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{src:"https://twemoji.maxcdn.com/v/latest/svg/1f550.svg",className:"icon"}),Object(u.jsx)("div",{children:H})]}),Object(u.jsx)("div",{className:"spacer"}),Object(u.jsx)(v.a,{icon:"help_outline",label:"Help & controls",onClick:d})]}),Object(u.jsx)(R,{ref:g,height:l||16,width:s||30,numMines:o||99,setFlagsCount:function(){},onStart:D,onEnd:T,onReset:I,GameOver:function(e){var t,n=e.revealed,i=e.close;return Object(u.jsxs)("div",{className:"banner error",children:[Object(u.jsx)(f.a,{use:"headline4",children:"Game Over"}),Object(u.jsx)(f.a,{use:"subtitle1",children:"You triggered a mine."}),Object(u.jsx)(L,{revealed:n}),Object(u.jsxs)("div",{className:"buttonRow",children:[Object(u.jsx)(b.a,{label:"Review last game",outlined:!0,onClick:function(){p.notify(A),i()}}),Object(u.jsx)(b.a,{label:"Change difficulty",outlined:!0,onClick:r}),Object(u.jsx)(b.a,{label:"New game",unelevated:!0,onClick:null===g||void 0===g||null===(t=g.current)||void 0===t?void 0:t.newGame})]})]})},Congrats:function(e){var t,n=e.revealed,i=e.close;return Object(u.jsxs)("div",{className:"banner error",children:[Object(u.jsx)(f.a,{use:"headline4",children:"Game Completed!"}),Object(u.jsx)(f.a,{use:"subtitle1",children:"You got through the entire map without triggering a mine."}),Object(u.jsx)(L,{revealed:n}),Object(u.jsxs)("div",{className:"buttonRow",children:[Object(u.jsx)(b.a,{label:"Review last game",outlined:!0,onClick:function(){p.notify(A),i()}}),Object(u.jsx)(b.a,{label:"Change difficulty",outlined:!0,onClick:r}),Object(u.jsx)(b.a,{label:"New game",unelevated:!0,onClick:null===g||void 0===g||null===(t=g.current)||void 0===t?void 0:t.newGame})]})]})}}),Object(u.jsxs)("div",{className:"actionRow buttonRow",children:[Object(u.jsxs)(j,{onClick:null===g||void 0===g||null===(n=g.current)||void 0===n?void 0:n.newGame,children:[Object(u.jsx)("span",{className:"material-icons",children:"refresh"}),Object(u.jsx)("span",{children:"Start a new match"})]}),Object(u.jsxs)(j,{onClick:r,children:[Object(u.jsx)("span",{className:"material-icons",children:"tune"}),Object(u.jsx)("span",{children:"Change difficulty"})]})]})]})]})}));var D=function(){var e=Object(i.useState)(!1),t=Object(a.a)(e,2),n=t[0],c=t[1],l=Object(i.useState)(2),s=Object(a.a)(l,2),o=s[0],r=s[1],d=Object(i.useState)(!1),j=Object(a.a)(d,2),b=j[0],v=j[1],x=Object(i.useState)(16),p=Object(a.a)(x,2),w=p[0],C=p[1],y=Object(i.useState)(30),S=Object(a.a)(y,2),k=S[0],N=S[1],R=Object(i.useState)(99),F=Object(a.a)(R,2),D=F[0],T=F[1],I=Object(i.useRef)();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(h.a,{open:n,onClose:function(e){if("change"==e.detail.action){var t,n=M[o];C(n.rowCount),N(n.colCount),T(n.mineCount),null===(t=I.current)||void 0===t||t.rerender(),setTimeout((function(){var e;null===(e=I.current)||void 0===e||e.newGame()}),50)}c(!1)},children:[Object(u.jsx)(h.e,{children:"Change Difficulty"}),Object(u.jsxs)(h.d,{children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Warning:"})," This will create a new game."]}),Object(u.jsx)(O.a,{twoLine:!0,style:{width:480},children:M.map((function(e,t){return Object(u.jsxs)(m.a,{onClick:function(){return r(t)},children:[Object(u.jsxs)(m.e,{children:[Object(u.jsx)(m.c,{children:e.name}),Object(u.jsxs)(m.d,{children:["Rows: ",e.rowCount," - Columns:"," ",e.colCount," - Mines:"," ",e.mineCount]})]}),Object(u.jsx)(m.b,{children:Object(u.jsx)(g.a,{checked:o===t,readOnly:!0})})]},t)}))})]}),Object(u.jsxs)(h.b,{children:[Object(u.jsx)(h.c,{action:"close",children:"Cancel"}),Object(u.jsx)(h.c,{action:"change",unelevated:!0,children:"Change difficulty"})]})]}),Object(u.jsxs)(h.a,{open:b,onClose:function(e){v(!1)},children:[Object(u.jsx)(h.e,{children:"Info"}),Object(u.jsxs)(h.d,{children:[Object(u.jsx)("p",{style:{marginBottom:0},children:"Musical Minesweeper, v1.1.0 by RealSGII2."}),Object(u.jsx)("p",{style:{marginTop:0},children:"A skin of Minesweeper using musical notes."}),Object(u.jsx)(f.a,{use:"headline5",children:"Main Goal"}),Object(u.jsx)("p",{children:"Clear the entire map except for blocks containing mines underneath them. Flagging is optional, but may be useful."}),Object(u.jsx)(f.a,{use:"headline5",children:"Controls"}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Left mouse button"}),": Reveal a block ",Object(u.jsx)("br",{}),Object(u.jsx)("b",{children:"Right mouse button"}),": Flag a block, again to unflag"]}),Object(u.jsx)(f.a,{use:"headline6",children:"Mobile"}),Object(u.jsxs)("p",{style:{marginTop:0},children:[Object(u.jsx)("b",{children:"Tap"}),": Reveal a block ",Object(u.jsx)("br",{}),Object(u.jsx)("b",{children:"Long press"}),": Flag a block, again to unflag"]}),Object(u.jsx)(f.a,{use:"headline5",children:"Credits"}),Object(u.jsxs)("p",{children:["Flag, clock, and bomb emoji made by Twitter in the Twemoji project. This website uses ",Object(u.jsx)("a",{href:"https://material.io/",target:"_blank",children:"https://material.io/"})," standards."]})]}),Object(u.jsx)(h.b,{children:Object(u.jsx)(h.c,{action:"close",isDefaultAction:!0,children:"Dismiss"})})]}),Object(u.jsx)(G,{rowCount:w,colCount:k,mineCount:D,openDifficultyDialog:function(){return c(!0)},openHelpDialog:function(){return v(!0)},ref:I})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,l=t.getLCP,s=t.getTTFB;n(e),i(e),c(e),l(e),s(e)}))};s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(D,{})}),document.getElementById("root")),T()}},[[57,1,2]]]);
//# sourceMappingURL=main.d290fe4a.chunk.js.map